{
  "name": "get_report_visits_yandex_metric",
  "description": "Формирование отчёта из Яндекс.Метрики (Reports API) с поддержкой preset и человеческих запросов. Возвращает ссылку на CSV-файл с данными.",
  "parameters": {
    "type": "object",
    "properties": {
      "ids": {
        "title": "ID счётчика",
        "type": "string",
        "description": "ID счётчика Яндекс.Метрики (обязательный)."
      },
      "date1": {
        "title": "Дата начала",
        "type": "string",
        "description": "Начальная дата периода в формате YYYY-MM-DD или ДД.ММ.ГГГГ (будет нормализована)."
      },
      "date2": {
        "title": "Дата окончания",
        "type": "string",
        "description": "Конечная дата периода в формате YYYY-MM-DD или ДД.ММ.ГГГГ (будет нормализована)."
      },
      "lang": {
        "title": "Язык интерфейса",
        "type": "string",
        "enum": ["ru", "en"],
        "description": "Язык интерфейса отчёта (по умолчанию ru)."
      },
      "preset": {
        "title": "Шаблон отчёта",
        "type": "string",
        "description": "Название шаблона отчёта (например: traffic, conversion, sources_social). Если не указано, определяется автоматически на основе query."
      },
      "query": {
        "title": "Человеческий запрос",
        "type": "string",
        "description": "Фраза на естественном языке (например: 'отчет по посещаемости', 'социальные сети'). Используется для автоматического выбора preset."
      }
    },
    "required": ["ids", "date1", "date2"]
  },
  "returns": {
    "type": "string",
    "description": "Ссылка на CSV-файл с данными отчёта, загруженный на tmpfiles.org."
  }
}
